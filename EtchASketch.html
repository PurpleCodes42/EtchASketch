<!DOCTYPE html>
<html>
<head>
  <title>EtchASketch</title>
</head>
<body>
    <!-- html here -->
    <h1>Etch A Sketch</h1>
    <p></p>
    <button id=clear>Clear Grid</button>
    <button id=pixels>Set pixels</button>
    <button id=random>Random Color</button>
    <p></p>
    <div id = container style = "width: 640px; height: 640px; 
        outline: solid; outline-color: black"></div>
  <script>
    /* JS here */
    const container = document.querySelector('#container');
    const contWidth = container.offsetWidth;
    const contHeight = container.offsetHeight;
    
    function createDiv(pixelRow){
        for (let j = 0; j < pixelRow; j++){
            for (let i = 0; i< pixelRow; i++){
                container.appendChild(createSquare(pixelRow));
            }
        }
    }

    function createSquare(pixelRow){
        let divWidth = contWidth/pixelRow + "px";
        let divHeight = contWidth/pixelRow + "px";

        const div = document.createElement('div');
        div.style.width = divWidth;
        div.style.height = divHeight;
        div.style.cssFloat = "left";
        div.classList.add("grids");
        return div;
    }

    function changeColor(grids, color){
        grids.style.backgroundColor = color;
    }

    function blankGrid(){
        const grids = document.querySelectorAll(".grids"); 
        grids.forEach(grids => grids.style.backgroundColor = "white");  
    }

    function clearGrid() {
        const grids = document.querySelectorAll(".grids"); 
        grids.forEach(grids => grids.remove());  
    }
    
    function setPixels(){
        clearGrid();
        let pixelsInARow = window.prompt("how many pixs shall the new grid " +
            "have on each side?");
        createDiv(pixelsInARow); 
        putEventListeners("white");
    }

    function putEventListeners(color){  
        const grids = document.querySelectorAll(".grids");   
        grids.forEach(grids => grids.addEventListener(
            "mouseover", 
            function () {
                changeColor(grids, color);
            },
        ));
    }

    function random_rgba() {
    var o = Math.round, r = Math.random, s = 255;
    return 'rgba(' + o(r()*s) + ',' + o(r()*s) + ',' + o(r()*s) + 
        ',' + r().toFixed(1) + ')';
}

    function setRandomColor(){
        blankGrid();
        const grids = document.querySelectorAll(".grids");   
        grids.forEach(grids => grids.addEventListener(
            "mouseover", 
            function () {
                changeColor(grids, random_rgba());
            },
        ));
    }

    createDiv(20);
    putEventListeners("black"); 

    const button1 = document.querySelector("#clear");
    button1.addEventListener("click", blankGrid);

    const button2 = document.querySelector("#pixels");
    button2.addEventListener("click", setPixels);

    const button3 = document.querySelector("#random");
    button3.addEventListener("click", setRandomColor);
        
  </script>
</body>
</html>